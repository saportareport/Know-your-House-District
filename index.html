<!DOCTYPE html>
<meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
<title>Georgia House</title>
<head> 
    <link rel="stylesheet" href="https://unpkg.com/leaflet@0.7.7/dist/leaflet.css" />
</head>

<style>

#map { height: 400px;
width: 100%; }

</style>

<div id="map"></div>
<div id="info">Click a district to start</div>
<div id="own_site"></div>
<div id="facebook"></div>
<div id="twitter"></div>
<div id="instagram"></div>
</div>

<script src="https://unpkg.com/leaflet@0.7.7/dist/leaflet.js"></script>
<script src="house_merged.json" type="text/javascript"></script>

<script>


var map = L.map('map').setView([33.85, -84.25], 11);

// L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
//     attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
//     maxZoom: 18,
//     id: 'greencracker.niib978j',
//     accessToken: 'pk.eyJ1IjoiZ3JlZW5jcmFja2VyIiwiYSI6ImQ5YzBlZDY4N2E3MTRlYjE4Y2ViNmM2NTY3OWMyMjQwIn0.qzrux5_Nbh5ICwJbeMFX4Q'
// }).addTo(map);
    
L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);    

var myStyle = {
    "color": "gray",
    "weight": 1,
    "opacity": 1,
    "fillOpacity": 0.0
};

L.geoJson(districts, {
    style: myStyle,
    onEachFeature: function (feature, layer) {
        // layer.bindLabel(feature.properties.DISTRICT);
        layer.on('click', function(e) {
            console.log(feature.properties)
            document.getElementById("info").innerHTML = '<strong>District ' + feature.properties.DISTRICT + 
                ': Rep. '+ feature.properties.house_social_name + '</strong><br>' +
                feature.properties.house_social_party + '<br>' +
                'Office: ' + feature.properties.house_social_office_phone + '<br>' +
                'Official e-mail: ' + feature.properties.house_social_office_email + '<br>' +
                '<a href="' + feature.properties.house_social_url + '" rel="noopener">Official website</a>'
            
            if (feature.properties.house_social_web === "") {
                document.getElementById("own_site").innerHTML = ''}
            else {document.getElementById("own_site").innerHTML = '<a href="' + feature.properties.house_social_web + '" rel="noopener">Personal website</a>'}

            if (feature.properties.house_social_fb === "") {
                document.getElementById("facebook").innerHTML = ''}
            else {document.getElementById("facebook").innerHTML = '<a href="' + feature.properties.house_social_fb + '" rel="noopener">Facebook</a>'}

            if (feature.properties.house_social_twitter === "") {
                document.getElementById("twitter").innerHTML = ''}
            else {document.getElementById("twitter").innerHTML = '<a href="' + feature.properties.house_social_twitter + '" rel="noopener">Twitter</a>'}

            if (feature.properties.house_social_insta === "") {
                document.getElementById("instagram").innerHTML = ''}
            else {document.getElementById("instagram").innerHTML = '<a href="' + feature.properties.insta + '" rel="noopener">Instagram</a>'}
                
        })
    }
}).addTo(map);


 </script>

</body>
</html>
